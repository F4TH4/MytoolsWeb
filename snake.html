<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game Wrap-Around</title>
<style>
body{font-family:Arial;text-align:center;background:#f0f0f0;padding:20px;margin:0;}
h1{margin-bottom:10px;}
#gameContainer{position:relative;width:400px;margin:0 auto;}
canvas{background:#000;border-radius:10px;display:block;margin:0 auto;}
#score{font-size:18px;font-weight:bold;margin:5px 0;}
/* Reset button di pojok kanan bawah canvas container */
#resetBtn{position:absolute;bottom:-50px;right:0;padding:10px 20px;border:none;border-radius:10px;background:#4D96FF;color:white;font-size:16px;cursor:pointer;}
#resetBtn:hover{background:#66a6ff;}
/* Controls (arrow) di tengah bawah canvas */
.controls{display:flex;flex-direction:column;align-items:center;margin-top:10px;}
.controls .row{display:flex;justify-content:center;margin:2px;}
.controls button{width:70px;height:70px;font-size:30px;margin:3px;border:none;border-radius:10px;background:#4D96FF;color:white;cursor:pointer;}
.controls button:hover{background:#66a6ff;}
</style>
</head>
<body>

<h1>Snake Game (Wrap Around)</h1>
<div id="gameContainer">
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <p id="score">Score: 0</p>
  <button id="resetBtn">Reset</button>
  <div class="controls">
    <div class="row"><button id="up">↑</button></div>
    <div class="row">
      <button id="left">←</button>
      <button id="down">↓</button>
      <button id="right">→</button>
    </div>
  </div>
</div>

<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
const box=20;
let snake=[{x:200,y:200}];
let food={x:Math.floor(Math.random()*20)*box,y:Math.floor(Math.random()*20)*box};
let dx=box, dy=0;
let score=0;
let game;

// Draw snake and food
function draw(){
  ctx.fillStyle='black';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  snake.forEach((s,i)=>{ctx.fillStyle=i===0?'lime':'green';ctx.fillRect(s.x,s.y,box,box);});
  ctx.fillStyle='red';
  ctx.fillRect(food.x,food.y,box,box);
}

// Update game state
function update(){
  let head={x:snake[0].x+dx,y:snake[0].y+dy};

  // Wrap-around
  if(head.x<0) head.x=canvas.width-box;
  else if(head.x>=canvas.width) head.x=0;
  if(head.y<0) head.y=canvas.height-box;
  else if(head.y>=canvas.height) head.y=0;

  // Self-collision
  if(snake.some(s=>s.x===head.x && s.y===head.y)){
    clearInterval(game);
    alert('Game Over! Score: '+score);
    return;
  }

  snake.unshift(head);

  // Check food
  if(head.x===food.x && head.y===food.y){
    score++;
    document.getElementById('score').textContent='Score: '+score;
    do{
      food.x=Math.floor(Math.random()*20)*box;
      food.y=Math.floor(Math.random()*20)*box;
    }while(snake.some(s=>s.x===food.x && s.y===food.y));
  }else{
    snake.pop();
  }
  draw();
}

// Keyboard controls (desktop)
document.addEventListener('keydown', e=>{
  switch(e.key){
    case 'ArrowUp': if(dy===0){dx=0;dy=-box;} break;
    case 'ArrowDown': if(dy===0){dx=0;dy=box;} break;
    case 'ArrowLeft': if(dx===0){dx=-box;dy=0;} break;
    case 'ArrowRight': if(dx===0){dx=box;dy=0;} break;
  }
});

// On-screen buttons (HP)
document.getElementById('up').addEventListener('click',()=>{if(dy===0){dx=0;dy=-box;}});
document.getElementById('down').addEventListener('click',()=>{if(dy===0){dx=0;dy=box;}});
document.getElementById('left').addEventListener('click',()=>{if(dx===0){dx=-box;dy=0;}});
document.getElementById('right').addEventListener('click',()=>{if(dx===0){dx=box;dy=0;}});

// Reset button
function resetGame(){
  clearInterval(game);
  snake=[{x:200,y:200}]; dx=box; dy=0; score=0;
  document.getElementById('score').textContent='Score: 0';
  food={x:Math.floor(Math.random()*20)*box,y:Math.floor(Math.random()*20)*box};
  game=setInterval(update,120);
}

game=setInterval(update,120);
document.getElementById('resetBtn').addEventListener('click',resetGame);
</script>

</body>
</html>
